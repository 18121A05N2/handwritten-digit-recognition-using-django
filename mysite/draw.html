<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="168" height="168" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>
<button id='predict'>predict</button>

<script>
    let x=0,y=0;
    let canvas = document.getElementById('myCanvas')
    let but = document.getElementById('predict')
    var context = canvas.getContext("2d");
    let arr = new Array(28,0);
    for (var i = 0; i < 28; i++) {
        arr[i] = new Array(28).fill(0);
    }
    let isDrawing = false;
    but.addEventListener('click',async (e)=>{
        console.log("ok")
        let promise = fetch('/predict',{
            method:'POST',
            headers:{
                "Content-type":"application/json"
            },
            body: JSON.stringify({
                data : arr
            })
        })
        console.log(arr)
    })
    canvas.addEventListener('mousedown', e => {
        x = parseInt(e.offsetX/6);
        y = parseInt(e.offsetY/6);

        isDrawing = true;
    });
    window.addEventListener('mouseup',e=>{
        isDrawing = false;
    })
    canvas.addEventListener('mousemove', e => {
        if (isDrawing === true) {
            if(parseInt(e.offsetX/6)!=x || parseInt(e.offsetY/6)!=y){
                arr[x][y]=1;
                x = parseInt(e.offsetX/6);
                y = parseInt(e.offsetY/6);
                context.beginPath()
                context.fillRect(x*6-6,y*6-6,6,6)
                
                
            }
        }
    });

    
</script> 
</body>
</html>
